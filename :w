import React from 'react';
import { useStorage } from '../../state/StorageState';
import { OnlineIndicator } from '../Layout';
import './SessionManagerPreview.scss';

interface SessionManagerPreviewProps {
  onClick: () => void;
}

export const SessionManagerPreview: React.FC<SessionManagerPreviewProps> = ({
  onClick,
}: SessionManagerPreviewProps) => {
  const [state] = useStorage();
  const numberOfSessions = Object.keys(state.sessions).length;

  if (state.isInitialized) {
    return (
      <button onClick={onClick} className="session-manager-preview">
        {numberOfSessions === 0 && <>No active sessions.</>}
        {numberOfSessions === 1 && <>1 active session.</>}
        {numberOfSessions > 2 && <>{numberOfSessions} active sessions.</>}
        <OnlineIndicator online={numberOfSessions > 0} />
      </button>
    );
  }
  return null;
};
