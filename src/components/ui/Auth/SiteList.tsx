import React from 'react';
import { Site } from '../../../model/Sites';
import { Sessions } from '../../../model/Sessions';
import './SiteList.scss';

interface SiteListProps {
  sites: Site[];
  sitesStatus: {
    [url: string]: {
      errors: string[];
      warnings: string[];
    };
  };
  sessions: Sessions;
  selected: number;
  onSelect: (id: number) => void;
}

export const SiteList: React.FunctionComponent<SiteListProps> = ({
  sites,
  sessions,
  selected,
  onSelect,
  sitesStatus,
}: SiteListProps) => (
  <section className="site-list">
    {sites.map(({ url }, index) => {
      const isOnline = sessions[url] !== undefined;
      return (
        <article
          key={url}
          className={`site-list-entry${isOnline ? ' online' : ''}${index === selected ? ' selected' : ''}`}
          onClick={(): void => onSelect(index)}>
          <p className="site-url">{url}</p>
          <div className="site-icons">
            {sitesStatus[url].warnings.length > 0 && (
              <svg className="site-icon site-icon-warning" width="32" height="32" version="1.1" viewBox="0 0 8.4667 8.4667" xmlns="http://www.w3.org/2000/svg"><path transform="scale(.26458)" d="m16.033 2.041c-.90656-.011474-1.7477.4677-2.1992 1.2539l-13.229 22.914c-.96138 1.6658.23877 3.748 2.1621 3.75h26.465c1.9233-.00201 3.1235-2.0842 2.1621-3.75l-13.229-22.914c-.43967-.76564-1.25-1.2416-2.1328-1.2539zm-.033203 5.8555c1.205 0 2.1758 1.0976 2.1758 2.4609v8.418c0 1.3633-.97083 2.4609-2.1758 2.4609s-2.1758-1.0976-2.1758-2.4609v-8.418c0-1.3633.97083-2.4609 2.1758-2.4609zm0 14.312a2.375 2.375 0 012.375 2.375 2.375 2.375 0 01-2.375 2.375 2.375 2.375 0 01-2.375-2.375 2.375 2.375 0 012.375-2.375z"/></svg>
            )}
            {sitesStatus[url].errors.length > 0 && (
              <svg className="site-icon site-icon-error" width="32" height="32" version="1.1" viewBox="0 0 8.4667 8.4667" xmlns="http://www.w3.org/2000/svg"><path transform="scale(.26458)" d="m15.992 2.9707a14.458 14.458 0 00-14.449 14.457 14.458 14.458 0 0014.457 14.459 14.458 14.458 0 0014.457-14.459 14.458 14.458 0 00-14.457-14.457 14.458 14.458 0 00-.007812 0zm.007812 4.9258c1.205 0 2.1758 1.0976 2.1758 2.4609v8.418c0 1.3633-.97083 2.4609-2.1758 2.4609s-2.1758-1.0976-2.1758-2.4609v-8.418c0-1.3633.97083-2.4609 2.1758-2.4609zm0 14.312a2.375 2.375 0 012.375 2.375 2.375 2.375 0 01-2.375 2.375 2.375 2.375 0 01-2.375-2.375 2.375 2.375 0 012.375-2.375z"/></svg>
            )}
            {isOnline && (<svg className="site-icon site-icon-online" width="40" height="40" version="1.1" viewBox="0 0 10.583 10.583" xmlns="http://www.w3.org/2000/svg"><path transform="scale(.26458)" d="m5.2637 0c-2.9158 0-5.2637 2.288-5.2637 5.1309v28.738c0 2.8429 2.3479 5.1309 5.2637 5.1309h-.26367v1h3v-1h24v1h3v-1h-.26367c2.9158 0 5.2637-2.288 5.2637-5.1309v-28.738c0-2.8429-2.3479-5.1309-5.2637-5.1309h-29.473zm1.2812 1.6973h26.91c2.662 0 4.8047 2.0901 4.8047 4.6855v26.234c0 2.5955-2.1427 4.6855-4.8047 4.6855h-26.91c-2.662 0-4.8047-2.0901-4.8047-4.6855v-26.234c0-2.5955 2.1427-4.6855 4.8047-4.6855zm15.625 1.7344c-1.2013 0-2.1699 1.8859-2.1699 4.2285v23.68c0 2.3426.9686 4.2285 2.1699 4.2285h12.143c1.2013 0 2.168-1.8859 2.168-4.2285v-23.68c0-2.3426-.96665-4.2285-2.168-4.2285h-12.143zm9.9219 10.832a2.8686 5.7371 0 012.8672 5.7363 2.8686 5.7371 0 01-2.8672 5.7363 2.8686 5.7371 0 01-2.8691-5.7363 2.8686 5.7371 0 012.8691-5.7363zm0 1.3926a2.1721 4.3442 0 00-2.1719 4.3438 2.1721 4.3442 0 002.1719 4.3438 2.1721 4.3442 0 002.1719-4.3438 2.1721 4.3442 0 00-2.1719-4.3438zm-8.9551.14258a2.1012 4.2024 0 011.0957.5625 2.1012 4.2024 0 01.98438 2.5977h1.4492c.19223 0 .34766.3089.34766.69336v.69531c0 .38446-.15542.69336-.34766.69336h-1.4492a2.1012 4.2024 0 01-.21484 1.0605 2.1012 4.2024 0 01-2.8711 1.5371 2.1012 4.2024 0 01-.76953-5.7402 2.1012 4.2024 0 011.7754-2.0996zm8.9551.96289a1.6191 3.2383 0 011.6191 3.2383 1.6191 3.2383 0 01-1.6191 3.2383 1.6191 3.2383 0 01-1.6191-3.2383 1.6191 3.2383 0 011.6191-3.2383zm-8.9375.55859a1.3401 2.6801 0 00-1.1328 1.3398 1.3401 2.6801 0 00.49024 3.6602 1.3401 2.6801 0 001.8301-.98047 1.3401 2.6801 0 00-.49024-3.6602 1.3401 2.6801 0 00-.69726-.35938z"/></svg>)}
            {!isOnline && (<svg className="site-icon site-icon-offline" width="40" height="40" version="1.1" viewBox="0 0 10.583 10.583" xmlns="http://www.w3.org/2000/svg"><path transform="scale(.26458)" d="m5.2637 0c-2.9158 5.9212e-16-5.2637 2.288-5.2637 5.1309v28.738c5.9212e-16 2.8429 2.3479 5.1309 5.2637 5.1309h-.26367v1h3v-1h24v1h3v-1h-.26367c2.9158 0 5.2637-2.288 5.2637-5.1309v-28.738c0-2.8429-2.3479-5.1309-5.2637-5.1309h-29.473zm1.2812 1.6973h26.91c2.662 0 4.8047 2.0901 4.8047 4.6855v26.234c0 2.5955-2.1427 4.6855-4.8047 4.6855h-26.91c-2.662 0-4.8047-2.0901-4.8047-4.6855v-26.234c0-2.5955 2.1427-4.6855 4.8047-4.6855zm.83984 1.1074c-2.4963 0-4.5078 1.9607-4.5078 4.3945v24.602c0 2.4338 2.0116 4.3945 4.5078 4.3945h25.23c2.4963 0 4.5078-1.9607 4.5078-4.3945v-24.602c0-2.4338-2.0116-4.3945-4.5078-4.3945h-25.23zm20.492 11.256a5.9606 5.9606 0 01.125 0 5.9606 5.9606 0 015.959 5.959 5.9606 5.9606 0 01-5.959 5.959 5.9606 5.9606 0 01-5.9629-5.959 5.9606 5.9606 0 015.8379-5.959zm.125 1.4453a4.5134 4.5134 0 00-4.5137 4.5137 4.5134 4.5134 0 004.5137 4.5137 4.5134 4.5134 0 004.5117-4.5137 4.5134 4.5134 0 00-4.5117-4.5137zm-18.609.14844a4.3661 4.3661 0 012.2793.58398 4.3661 4.3661 0 012.0449 2.6992h3.0117c.39944 0 .7207.32127.7207.7207v.72266c0 .39944-.32126.7207-.7207.7207h-3.0117a4.3661 4.3661 0 01-.44727 1.1016 4.3661 4.3661 0 01-5.9648 1.5977 4.3661 4.3661 0 01-1.5977-5.9648 4.3661 4.3661 0 013.6855-2.1816zm18.609 1a3.3644 3.3644 0 013.3633 3.3652 3.3644 3.3644 0 01-3.3633 3.3652 3.3644 3.3644 0 01-3.3652-3.3652 3.3644 3.3644 0 013.3652-3.3652zm-18.57.58203a2.7845 2.7845 0 00-2.3555 1.3906 2.7845 2.7845 0 001.0195 3.8027 2.7845 2.7845 0 003.8027-1.0176 2.7845 2.7845 0 00-1.0176-3.8027 2.7845 2.7845 0 00-1.4492-.37305z"/></svg>)}
          </div>
        </article>
      );
    })}
  </section>
);
